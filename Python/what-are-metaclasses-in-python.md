# 什么是Python中的元类

## 问题

什么是元类，我们用它们做什么？

## 答案

### No.1

元类是类的类。就像类定义了实例对象的行为一样，元类定义了类的行为。类是元类的实例。

虽然在Python中你可以为元类使用任意的callables（如[Jerub](https://stackoverflow.com/questions/100003/what-are-metaclasses-in-python/100037#100037)所示）,实际上更有用的方法是使它自身成为一个真正的类。`type`是Python中常用的元类。正如你所猜想的，`type`自身就是一个类，它是自身的类型。你将无法在Python中重新创建一个纯粹像`type`一样的东西。要在Python中创建自己的元类，其实只需要构建`type`的子类即可。

元类最常用作类工厂。就像你通过调用类名来创建类的一个实例一样，Python通过调用元类来创建一个新类（当它执行`class`语句）。结合常规的`__init__`和`__new__`方法，元类因此允许你在创建类时做“额外的事”，比如使用某个注册表注册新类，或者甚至完全用其他类替换该类。

当`class`语句被执行时，Python首先执行`class`语句的主体，就像执行正常的代码块一样。生成的命名空间（一个词典)保存了将要生成的类的属性。